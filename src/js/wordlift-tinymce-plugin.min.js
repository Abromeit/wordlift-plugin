(function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=jQuery,tinymce.PluginManager.add("wordlift",function(c){return c.addButton("wordlift",{text:"WordLift",icon:!1,onclick:function(){var c,d;return c=tinyMCE.activeEditor.getContent({format:"text"}),d={action:"wordlift_analyze",body:c},a.ajax({type:"POST",url:ajaxurl,data:d,success:function(c){var d,e,f,g,h,i,j,k,l,m,n,o;for(f=a.parseJSON(c),l=f["@graph"].filter(function(a){return b.call(a["@type"],"enhancer:TextAnnotation")>=0&&null!=a["enhancer:selection-prefix"]}),d=tinyMCE.get("content").getContent({format:"raw"}),o=[],m=0,n=l.length;n>m;m++)k=l[m],console.log(k),i=k["enhancer:selection-prefix"]["@value"].replace("(","\\(").replace(")","\\)"),j=k["enhancer:selection-suffix"]["@value"].replace("(","\\(").replace(")","\\)"),g=new RegExp("(\\W)("+k["enhancer:selected-text"]["@value"]+')(\\W)(?![^>]*")'),h='$1<strong id="'+k["@id"]+'" class="textannotation"							typeof="http://fise.iks-project.eu/ontology/TextAnnotation">$2</strong>$3',d=d.replace(g,h),e=tinyMCE.get("content").isDirty(),tinyMCE.get("content").setContent(d),e?o.push(void 0):o.push(tinyMCE.get("content").isNotDirty=1);return o}})}})})}).call(this);
//# sourceMappingURL=wordlift-tinymce-plugin.min.js.map