<?xml version="1.0" encoding="UTF-8"?>

<application xmlns="http://purl.org/insideout/configuration" xmlns:wordpress="http://purl.org/insideout/wordpress">

    <property name="entity-post-type" value="io-wordlift-entity" />
    <property name="entity-field-prefix" value="io-wordlift-" />
    <property name="entity-field-type" value="io-wordlift-schema-type" />
    <property name="schemaorg-field-type" value="@type" />
    <property name="meta-key-job-id" value="_wordlift_job_id" />
    <property name="meta-key-job-status" value="_wordlift_job_status" />

    <context name="wordLift" />

    <!-- ***** W O R D P R E S S   P O S T - T Y P E S -->
    <wordpress:postType name="io-wordlift-entity" class="entityPostType" />

    <!-- ***** W O R D P R E S S   A C T I O N S -->
    <!-- uncomment the following to enable posts analysis via WordLift Server -->

    <!-- ***** W O R D P R E S S   F I L T E R S -->
    <wordpress:filter name="the_content" class="contentFilter" method="content" />

    <!-- ***** W O R D P R E S S   S H O R T C O D E S -->
    <wordpress:shortCode name="entities_bar" class="entitiesBar" method="get" />

    <class id="geoMapShortCode" name="WordLift_GeoMap"
           filename="/php/insideout/wordlift/shortcodes/GeoMap.php" />
    <wordpress:shortCode name="wordlift.geomap" class="geoMapShortCode" method="get" />

    <class id="treeMapShortCode" name="WordLift_TreeMap"
           filename="/php/insideout/wordlift/shortcodes/TreeMap.php">
        <property name="entityService" reference="entityService" />
        <property name="width" value="100"/>
        <property name="height" value="75"/>
        <property name="columnWidth" value="108"/>
    </class>
    <wordpress:shortCode name="wordlift.treemap" class="treeMapShortCode" method="get" />

    <!-- ***** W O R D P R E S S   S T Y L E S -->
    <wordpress:style target="user" name="style.css" url="/wp-content/plugins/wordlift/sass/css/style.css" />

    <wordpress:style target="admin" name="admin.css" url="/wp-content/plugins/wordlift/sass/css/admin.css" />

    <!-- ***** W O R D P R E S S   S C R I P T S -->
    <wordpress:script target="user" name="ba-debug"
                      version="0.0.4"
                      footer="true"
                      url="https://raw.github.com/cowboy/javascript-debug/master/ba-debug.min.js">
    </wordpress:script>

    <wordpress:script target="user" name="jquery-ui"
            version="1.8.21"
            footer="true"
            url="/wp-content/plugins/wordlift/js/jquery-ui-1.8.21.custom.min.js">
    </wordpress:script>

    <wordpress:script target="user" name="jquery-isotope"
                      version="1.8.21"
                      footer="true"
                      url="/wp-content/plugins/wordlift/js/jquery.isotope.min.js">
    </wordpress:script>

    <wordpress:script target="user" name="ioio"
            version="0.9.6"
            footer="true"
            url="/wp-content/plugins/wordlift/js/ioio-0.9.6.debug.js">
        <dependsOn name="jquery-ui" />
    </wordpress:script>

    <wordpress:script target="user" name="entityTiles"
            version="1"
            footer="true"
            url="/wp-content/plugins/wordlift/js/entityTiles.js">
        <dependsOn name="ioio" />
    </wordpress:script>

    <wordpress:script target="admin" name="angularjs"
                      version="1.0.1"
                      footer="false"
                      url="/wp-content/plugins/wordlift/js/angular-1.0.1.min.js">
    </wordpress:script>


    <!-- ***** W O R D P R E S S   M E T A B O X E S -->
    <!--
        id = (string) (required) HTML 'id' attribute of the edit screen section
        title = (string) (required) Title of the edit screen section, visible to user
        postType = (string) (required) The type of Write screen on which to show the edit screen section
            ('post', 'page', 'link', or 'custom_post_type' where custom_post_type is the custom post type slug)
        context = (string) (optional) The part of the page where the edit screen section should be shown ('normal',
            'advanced', or 'side').
        priority = (string) (optional) The priority within the context where the boxes should show ('high', 'core',
            'default' or 'low')
    -->
    <!-- add_meta_box( $id, $title, $callback, $post_type, $context, $priority, $callback_args ); -->

    <!-- ***** S I M P L E  E C H O  S E R V I C E ***** -->
    <wordpress:ajax service="ajaxService" action="wordlift.echo" class="echoService" method="getPong"
                    authentication="false" capabilities="any" />

    <!-- ***** S C H E M A . O R G  S E R V I C E S ***** -->
    <!--       to create and read posts -->
    <wordpress:ajax service="ajaxService" action="schema-org.create-post" class="postsAjaxService" method="createPost"
                    authentication="true" capabilities="publish_posts" />
    <wordpress:ajax service="ajaxService" action="schema-org.posts" class="postsAjaxService" method="getPosts"
                    authentication="false" capabilities="any" />

    <!-- ***** W O R D L I F T  E N T I T I E S  D U M P  S E R V I C E ***** -->
    <!--       disambiguations -->
    <wordpress:ajax service="ajaxService" action="wordlift.disambiguation" class="dumpAjaxService" method="options"
                    authentication="false" capabilities="any" httpMethod="OPTIONS"
                    corsOrigin="*" corsMethods="GET,OPTIONS" corsHeaders="origin, x-requested-with, accept" />
    <wordpress:ajax service="ajaxService" action="wordlift.disambiguation" class="dumpAjaxService" method="getDisambiguationOptions"
                    authentication="false" capabilities="any" httpMethod="GET"
                    corsOrigin="*" corsMethods="GET" corsHeaders="origin, x-requested-with, accept" />

    <!-- ***** W O R D L I F T  C A L L B A C K  S E R V I C E ***** -->
    <!--       receives callback data -->
    <wordpress:ajax service="ajaxService" action="wordlift.callback" class="jobCallbackService" method="callback"
                    authentication="false" capabilities="any" httpMethod="POST" />

    <!-- ***** W O R D L I F T  J O B  A J A X  S E R V I C E ***** -->
    <!--       methods to create, read, update an analysis job. -->
    <wordpress:ajax service="ajaxService" action="wordlift.job" class="jobAjaxService" method="options"
                    authentication="true" capabilities="any" httpMethod="OPTIONS"
                    corsOrigin="*" corsMethods="GET,POST,OPTIONS" corsHeaders="origin, x-requested-with, content-type, accept"/>
    <wordpress:ajax service="ajaxService" action="wordlift.job" class="jobAjaxService" method="createJob"
                    authentication="true" capabilities="any" httpMethod="POST"
                    corsOrigin="*" corsMethods="POST" corsHeaders="origin, x-requested-with, content-type, accept"/>
    <wordpress:ajax service="ajaxService" action="wordlift.job" class="jobAjaxService" method="getJob"
                    authentication="true" capabilities="any" httpMethod="GET"
                    corsOrigin="*" corsMethods="GET" corsHeaders="origin, x-requested-with, content-type, accept"/>
    <wordpress:ajax service="ajaxService" action="wordlift.job" class="jobAjaxService" method="updateJob"
                    authentication="true" capabilities="any" httpMethod="PUT" />


    <!-- ****** W O R D L I F T  P O S T  A J A X  S E R V I C E ***** -->
    <!--        methods to select a binding between textannotations and entities. -->
    <wordpress:ajax service="ajaxService" action="wordlift.disambiguations" class="postAjaxService" method="options"
                    authentication="false" capabilities="any" httpMethod="OPTIONS"
                    corsOrigin="*" corsMethods="POST,DELETE,OPTIONS" corsHeaders="origin, x-requested-with, content-type, accept"/>
    <wordpress:ajax service="ajaxService" action="wordlift.disambiguations" class="postAjaxService" method="clear"
                    authentication="false" capabilities="any" httpMethod="DELETE"
                    corsOrigin="*" corsMethods="DELETE" corsHeaders="origin, x-requested-with, content-type, accept"/>
    <wordpress:ajax service="ajaxService" action="wordlift.disambiguations" class="postAjaxService" method="bind"
                    authentication="false" capabilities="any" httpMethod="POST"
                    corsOrigin="*" corsMethods="POST" corsHeaders="origin, x-requested-with, content-type, accept"/>


    <class id="geoRssAjaxService" name="WordLift_GeoRssAjaxService" filename="/php/insideout/wordlift/ajax/GeoRssAjaxService.php">
        <property name="tripleStoreService" reference="tripleStoreService" />
    </class>
    <wordpress:ajax service="ajaxService" action="wordlift.georss" class="geoRssAjaxService" method="get"
                    authentication="false" capabilities="any" httpMethod="GET" />


    <!-- ***** W O R D P R E S S  E D I T O R  C O N F I G U R A T I O N ***** -->
    <wordpress:editor property="extended_valid_elements" value="span[about|class|id|typeof]" />
    <wordpress:style target="editor" name="style.css" url="../wp-content/plugins/wordlift/sass/css/wordlift.disambiguate.css" />


    <!-- ***** W O R D L I F T  D I S A M B I G U A T I O N  M E T A B O X ***** -->
    <!--       composed of:
                1. a reference to the entities HTML metabox class.
                2. a stylesheet.
                3. a script.
                4. a metaBox configuration.
    -->
    <class id="entitiesHtmlMetaBox" name="WordPress_HtmlMetaBox"
           filename="/php/insideout/wordpress/metaboxes/HtmlMetaBox.php">
        <dependsOn filename="/php/insideout/wordpress/interfaces/IMetaBox.php" />

        <property name="htmlFilename" value="/wordlift/html/insideout/wordlift/build/disambiguate.html" />
    </class>

    <wordpress:style target="admin" name="wordlift.disambiguation.css" url="/wp-content/plugins/wordlift/sass/css/wordlift.disambiguate.css" />

    <wordpress:script target="admin" name="wordlift-disambiguation"
                      version="1.0.0"
                      footer="true"
                      url="/wp-content/plugins/wordlift/js/wordlift.disambiguate.js"
                      developmentUrl="http://localizeme.dyndns.org:4567/javascripts/wordlift.disambiguate.js">
        <dependsOn name="angularjs" />
    </wordpress:script>

    <wordpress:metaBox id="wordlift_entity_references_meta_box" title="WordLift Semantic Blog" class="entitiesHtmlMetaBox"
                       postType="post" context="side" priority="high" />


    <!-- ***** J O B  A J A X  S E R V I C E ***** -->
    <class id="jobAjaxService" name="WordLift_JobAjaxService"
           filename="/php/insideout/wordlift/ajax/JobAjaxService.php">

        <property name="jobRequestService" reference="jobRequestService" />
        <property name="jobService" reference="jobService" />
    </class>

    <!-- ***** P O S T  A J A X  S E R V I C E ***** -->
    <class id="postAjaxService" name="WordLift_PostAjaxService"
           filename="/php/insideout/wordlift/ajax/PostAjaxService.php">

        <property name="tripleStoreService" reference="tripleStoreService" />
    </class>

    <!-- ***** J O B  R E Q U E S T  S E R V I C E ***** -->
    <class id="jobRequestService" name="WordLift_PlainTextJobRequestService"
           filename="/php/insideout/wordlift/services/PlainTextJobRequestService.php">
        <dependsOn filename="/php/insideout/wordlift/services/JobRequestService.php" />

        <property name="consumerKey" value="0123456789" />
        <property name="callbackURL" value="http://localizeme.dyndns.org/wordlift/wp-admin/admin-ajax.php?action=wordlift.callback" />
        <property name="requestMimeType" value="application/rdf+xml" />

        <property name="requestProtocol" value="http" />
        <property name="requestHttpMethod" value="POST" />
        <property name="requestContentTypeHeader" value="application/json" />
        <property name="requestAcceptHeader" value="application/json" />

        <property name="requestURL" value="http://localhost:8080/wordlift/api/job" />
    </class>

    <!-- ***** J O B S E R V I C E **** -->
    <class id="jobService" name="WordLift_DefaultJobService"
           filename="/php/insideout/wordlift/services/DefaultJobService.php" >
        <dependsOn filename="/php/insideout/wordlift/services/JobService.php" />

        <property name="metaKeyJobID" value="{meta-key-job-id}" />
        <property name="metaKeyJobStatus" value="{meta-key-job-status}" />
    </class>

    <class id="tripleStoreService" name="WordLift_TripleStoreService"
           filename="/php/insideout/wordlift/services/TripleStoreService.php">
        <dependsOn filename="/php/arc2/ARC2.php" />

        <property name="tablePrefix" value="wordlift" />
    </class>

    <class id="dumpAjaxService" name="WordLift_DumpAjaxService"
           filename="/php/insideout/wordlift/ajax/DumpAjaxService.php">

        <property name="tripleStoreService" reference="tripleStoreService" />
    </class>

    <!-- ***** E C H O  S E R V I C E ***** -->
    <class id="echoService" name="WordLift_EchoService"
           filename="/php/insideout/wordlift/ajax/EchoService.php" />

    <!-- ***** J O B  C A L L B A C K  S E R V I C E ***** -->
    <class id="jobCallbackService" name="WordLift_JobCallbackService"
           filename="/php/insideout/wordlift/ajax/JobCallbackService.php">


        <property name="entityService" reference="entityService" />
        <property name="jobService" reference="jobService" />
        <property name="tripleStoreService" reference="tripleStoreService" />
    </class>

    <!-- ***** A J A X   A N D   J S O N   I N S T A N C E S ***** -->
    <class id="jsonService" name="WordPress_JsonService"
           filename="/php/insideout/wordpress/services/JsonService.php" />

    <class id="ajaxService" name="WordPress_AjaxService"
           filename="/php/insideout/wordpress/services/AjaxService.php">
        <dependsOn filename="/php/insideout/wordpress/interfaces/IAjaxService.php" />
        <dependsOn filename="/php/insideout/wordpress/services/AjaxProxy.php" />

        <property name="jsonService" reference="jsonService" />
    </class>


    <!-- ***** E N T I T Y    P O S T - T Y P E -->
    <class id="entityPostType" name="WordLift_EntityPostType"
           filename="/php/insideout/wordlift/types/EntityPostType.php">
        <dependsOn filename="/php/insideout/wordpress/interfaces/IPostType.php" />

        <property name="customPostType" value="{entity-post-type}" />
        <property name="rewriteSlug" value="entities" />
        <property name="menuIconURL" value="/wordlift/sass/img/semantic-box-14x16.png" />
        <property name="fieldPrefix" value="{entity-field-prefix}" />
        <property name="fieldType" value="{entity-field-type}" />
    </class>

    <!-- ***** E N T I T I E S   B A R -->
    <class id="entitiesBar" name="WordLift_EntitiesBar"
           filename="/php/insideout/wordlift/shortcodes/EntitiesBar.php">
        <property name="contentFilterClass" reference="contentFilter" />
    </class>

    <!-- ***** P O S T   A N A L Y Z E R -->
    <class id="postAnalyzer" name="WordLift_PostAnalyzer"
           filename="/php/insideout/wordlift/actions/PostAnalyzer.php">

        <property name="jobService" reference="jobService" />
        <property name="jobRequestService" reference="jobRequestService" />
    </class>

    <!-- ***** C O N T E N T   F I L T E R -->
    <class id="contentFilter" name="WordLift_ContentFilter"
           filename="/php/insideout/wordlift/filters/ContentFilter.php">

        <property name="entityService" reference="entityService" />
        <property name="schemaOrg" value="http://schema.org" />
    </class>

    <!-- ***** X R A Y S E R V I C E -->
    <class id="xRayService" name="SchemaOrg_XRayService"
           filename="/php/insideout/schemaorg/services/XRayService.php" />

    <!-- ***** S C H E M A S E R V I C E -->
    <class id="schemaService" name="SchemaOrg_SchemaService"
           filename="/php/insideout/schemaorg/services/SchemaService.php">
        <dependsOn filename="/php/insideout/schemaorg/domain/ISchema.php" />
        <dependsOn filename="/php/insideout/schemaorg/domain/SchemaProperty.php" />
        <dependsOn filename="/php/insideout/schemaorg/domain/Schema.php" />

        <dependsOn filename="/php/insideout/schemaorg/schemas/ISchema.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Thing.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/CreativeWork.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/MediaObject.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/AudioObject.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/BlogPosting.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/GeoCoordinates.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Movie.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Organization.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Other.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Person.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Place.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/Product.php" />
        <dependsOn filename="/php/insideout/schemaorg/schemas/VideoObject.php" />

        <property name="xRayService" reference="xRayService" />
    </class>

    <!-- ***** W O R D P R E S S   D A T A S T O R E -->
    <class id="dataStore" name="SchemaOrg_WordPressDataStore"
           filename="/php/insideout/schemaorg/stores/WordPressDataStore.php">
        <dependsOn filename="/php/insideout/schemaorg/domain/EntityProperty.php" />
        <dependsOn filename="/php/insideout/schemaorg/domain/EntityPropertyValue.php" />
        <dependsOn filename="/php/insideout/schemaorg/stores/IDataStore.php" />

        <property name="fieldPrefix" value="{entity-field-prefix}" />
        <property name="fieldType" value="{entity-field-type}" />
	    <property name="schemaService" reference="schemaService" />
    </class>

    <!-- ***** E N T I T Y  S E R V I C E **** -->
    <class id="entityService" name="WordLift_DefaultEntityService"
           filename="/php/insideout/wordlift/services/DefaultEntityService.php" >
        <dependsOn filename="/php/insideout/wordlift/services/EntityService.php" />

        <dependsOn filename="/php/insideout/schemaorg/domain/ISchema.php" />
        <dependsOn filename="/php/insideout/schemaorg/domain/Entity.php" />

        <property name="dataStore" reference="dataStore" />
        <property name="metaKey" value="_io-wordlift-posts-accepted" />
        <property name="postType" value="{entity-post-type}" />
        <property name="metaKeySubject" value="_wordlift_subject" />
        <property name="metaKeyReferences" value="_wordlift_references" />
        <property name="postStatus" value="any" />

        <property name="tripleStoreService" reference="tripleStoreService" />
    </class>

    <!-- ***** P R E P R O C E S S O R S ***** -->
    <class id="videoObjectQualityPreprocessor" name="SchemaOrg_VideoObjectQualityPreprocessor"
            filename="/php/insideout/schemaorg/preprocessors/VideoObjectQualityPreprocessor.php">
        <dependsOn filename="/php/insideout/schemaorg/preprocessors/IPreprocessor.php" />
    </class>

    <!-- ***** P O S T S   A J A X   S E R V I C E ***** -->
    <class id="postsAjaxService" name="SchemaOrg_PostsAjaxService"
           filename="/php/insideout/schemaorg/ajax/PostsAjaxService.php">
        <property name="preprocessor" reference="videoObjectQualityPreprocessor" />
        <property name="saveToUploads" value="false" />
        <property name="proxyService" reference="proxyService" />
        <property name="entityPostType" value="{entity-post-type}" />
        <property name="entityPostStatus" value="publish" />
        <property name="entityFieldPrefix" value="{entity-field-prefix}" />
        <property name="entityFieldType" value="{entity-field-type}" />
        <property name="schemaOrgFieldType" value="{schemaorg-field-type}" />
    </class>

    <!-- ***** P R O X Y   S E R V I C E ***** -->
    <class id="proxyService" name="WordPress_ProxyService"
           filename="/php/insideout/wordpress/services/ProxyService.php">

        <property name="urlPrefix" value="http://emlimg.enel.com/" />
        <property name="expiryModifier" value=" +7 days" />
        <property name="dateFormat" value="D, d M Y H:i:s e" />
        <property name="cacheSubdir" value="cache" />
        <property name="hashAlgo" value="sha512" />
    </class>


</application>
