<!--  ERROR MESSAGE  -->
<div class="wl-error" ng-repeat="item in errors">
  <div class="wl-error-wrap-icon">
    <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-error-icon.svg" class="wl-error-icon">
  </div>
  <div class="wl-error-wrap-msg">
    <p class="wl-error-msg">
      {{ item.msg }}
    </p>
  </div>
  <div class="wl-error-close-btn">
    <span></span>
    <span></span>
  </div>
</div>

<!-- CREATE NEW ENTITY BTN  -->
<div class="wl-create-entity">
  <div class="wl-create-entity-wrap" ng-hide="addEntityFormIsVisible" ng-click="openAddEntityForm()" ng-class="{ 'button-primary selected wl-button' : hasAnalysis(), 'preview' : !hasAnalysis() }">
    <h1 class="wl-tab-lead-text wl-crate-entity-lead">
			Create new entity
		</h1>
    <h1 class="wl-tab-lead-text wl-crate-entity-lead">
			+
		</h1>
  </div>
</div>

<!-- CLASSIFICATION BOX  -->

<div class="wl-tab-lead">
  <div class="wl-tab-lead-wrap">
    <h1 class="wl-tab-lead-text">
			Content classification
		</h1>
    <div class="wl-tab-lead-text wl-tab-lead-btn">
      <!-- display a triangle -->
    </div>
  </div>
</div>

<!-- <h3 class="wl-widget-headline">
  <span>Content classification</span>
  <i
    ng-class="{ 'wl-more': contentClassificationOpened == false, 'wl-less': contentClassificationOpened == true }"
    ng-click="toggleCurrentSection()">
  </i>
  <span ng-show="isRunning" class="wl-spinner"></span>
</h3> -->

<div ng-show="contentClassificationOpened">

  <div ng-show="annotation">
    <h4 class="wl-annotation-label">
      <i class="wl-annotation-label-icon"></i>
      {{ analysis.annotations[ annotation ].text }}
      <small>
        [ {{ analysis.annotations[ annotation ].start }}, {{ analysis.annotations[ annotation ].end }} ]
      </small>
      <i
        class="wl-annotation-label-remove-icon"
        ng-click="selectAnnotation(undefined)">
      </i>
    </h4>
  </div>

  <wl-classification-box ng-repeat="box in configuration.classificationBoxes">

    <div ng-hide="annotation" class="wl-without-annotation">
      <wl-entity-tile show-confidence="false" is-selected="isEntitySelected(entity, box)" on-entity-select="onSelectedEntityTile(entity, box)" entity="entity" ng-repeat="entity in analysis.entities | filterEntitiesByTypesAndRelevance:box.registeredTypes">
      </wl-entity-tile>
    </div>

    <div ng-show="annotation" class="wl-with-annotation">
      <wl-entity-tile show-confidence="false" is-selected="isLinkedToCurrentAnnotation(entity)" on-entity-select="onSelectedEntityTile(entity, box)" entity="entity" ng-repeat="entity in analysis.annotations[annotation].entities | filterEntitiesByTypes:box.registeredTypes">
      </wl-entity-tile>
    </div>

  </wl-classification-box>

</div>

<!-- ARTICLE METADATA -->

<div class="wl-tab-lead">
  <div class="wl-tab-lead-wrap">
    <h1 class="wl-tab-lead-text">
      Article metadata
		</h1>
    <div class="wl-tab-lead-text wl-tab-lead-btn">
      <!-- display a triangle -->
    </div>
  </div>
</div>

<!-- <h3 class="wl-widget-headline">
  <span>Article metadata</span>
  <i
    ng-class="{ 'wl-more': articleMetadataOpened == false, 'wl-less': articleMetadataOpened == true }"
    ng-click="toggleCurrentSection()">
  </i>
  <span ng-show="isGeolocationRunning" class="wl-spinner"></span>
</h3> -->

<div class="wl-widget-article-metadata">

  <div class="wl-widget-article-metadata-wrap">

    <!-- TOP SECTION -->
    <div class="wl-widget-article-metadata-top">

      <!-- AUTHOR -->
      <div class="wl-widget-article-metadata-author">
        <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-author-icon.svg">
        <p>
          {{configuration.currentUser}}
        </p>
      </div>

      <!-- LOCATION -->
      <div class="wl-widget-article-metadata-location">
        <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-location-icon.svg">
        <p>
          Rome
        </p>
      </div>

      <!-- DATE -->
      <div class="wl-widget-article-metadata-date">
        <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-calendar-icon.svg">
        <p>
          {{configuration.publishedDate}}
        </p>
      </div>

    </div>

      <!-- BOTTOM-TOPIC SECTION  -->
    <div class="wl-widget-article-metadata-bottom">
      <h2 class="wl-widget-article-metadata-topic-lead">
        Topic
      </h2>

      <div class="wl-widget-article-metadata-topic-single" ng-click="onEntitySelect()">
        <h3>
          Chef Rubio
          {{entity.label}}
        </h3>
        <div class="wl-widget-article-metadata-topic-bar">
          <!-- display the progress bar  -->
          <div class="wl-widget-article-metadata-topic-bar-progress" style="width:{{entity.confidence*100}}%"></div>
        </div>
      </div>

      <div class="wl-widget-article-metadata-topic-single" ng-click="onEntitySelect()">
        <h3>
          Chef Rubio longer title
          {{entity.label}}
        </h3>
        <div class="wl-widget-article-metadata-topic-bar">
          <!-- display the progress bar  -->
          <div class="wl-widget-article-metadata-topic-bar-progress" style="width:{{entity.confidence*100}}%"></div>
        </div>
      </div>

      <div class="wl-widget-article-metadata-topic-single" ng-click="onEntitySelect()">
        <h3>
          Chef
          {{entity.label}}
        </h3>
        <div class="wl-widget-article-metadata-topic-bar">
          <!-- display the progress bar  -->
          <div class="wl-widget-article-metadata-topic-bar-progress" style="width:{{entity.confidence*100}}%"></div>
        </div>
      </div>

      <div class="wl-widget-article-metadata-topic-single" ng-click="onEntitySelect()">
        <h3>
          Chef
          {{entity.label}}
        </h3>
        <div class="wl-widget-article-metadata-topic-bar">
          <!-- display the progress bar  -->
          <div class="wl-widget-article-metadata-topic-bar-progress" style="width:{{entity.confidence*100}}%"></div>
        </div>
      </div>

      <div class="wl-widget-article-metadata-topic-single" ng-click="onEntitySelect()">
        <h3>
          Chef
          {{entity.label}}
        </h3>
        <div class="wl-widget-article-metadata-topic-bar">
          <!-- display the progress bar  -->
          <div class="wl-widget-article-metadata-topic-bar-progress" style="width:{{entity.confidence*100}}%"></div>
        </div>
      </div>

      <!-- <wl-entity-tile show-confidence="true" is-selected="isTopic(topic)" on-entity-select="onTopicSelected(topic)" entity="topic" ng-repeat="topic in analysis.topics | orderBy :'-confidence'">
      </wl-entity-tile> -->

    </div>

  </div>
</div>
<div ng-show="articleMetadataOpened">
  <h5 class="wl-widget-sub-headline">What <small>Topic</small></h5>

  <div class="wl-without-annotation">
    <wl-entity-tile show-confidence="true" is-selected="isTopic(topic)" on-entity-select="onTopicSelected(topic)" entity="topic" ng-repeat="topic in analysis.topics | orderBy :'-confidence'">
    </wl-entity-tile>
  </div>

  <h5 class="wl-widget-sub-headline">Who <small>Author</small></h5>

  <div class="wl-widget-wrapper">
    <i class="wl-toggle-on wl-disabled"></i>
    <span class="entity wl-person"><i class="type"></i>
      {{configuration.currentUser}}
    </span>
  </div>

  <h5 class="wl-widget-sub-headline">Where <small>Publishing Place</small></h5>
  <div class="wl-widget-wrapper" ng-hide="hasPublishedPlace()">
    <i class="wl-toggle-off" />
    <span class="entity wl-place"><i class="type" />
    <span ng-click="getLocation()" class="wl-cta-location">Get current location</span>
    </span>
  </div>
  <div class="wl-without-annotation">
    <wl-entity-tile show-confidence="false" is-selected="isPublishedPlace(entity)" on-entity-select="onPublishedPlaceSelected(entity)" entity="entity" ng-repeat="entity in suggestedPlaces"></wl-entity-tile>
  </div>

  <h5 class="wl-widget-sub-headline">When <small>Publishing Date</small></h5>
  <div class="wl-widget-wrapper">
    <i class="wl-toggle-on wl-disabled" />
    <span class="entity wl-event"><i class="type" />
    {{configuration.publishedDate}}
  </span>
  </div>
</div>

<!-- SUGGESTED IMAGES -->
<div class="wl-tab-lead">
  <div class="wl-tab-lead-wrap">
    <h1 class="wl-tab-lead-text">
      Suggested images
		</h1>
    <div class="wl-tab-lead-text wl-tab-lead-btn">
      <!-- display a triangle -->
    </div>
  </div>
</div>

<div class="wl-widget-suggested-images">
  <!-- SUGGESTED IMAGES WRAP -->
  <div class="wl-widget-suggested-images-wrap">
    <!-- SUGGESTED IMAGES TOP SECTION -->
    <div class="wl-widget-suggested-images-top">
      <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-drag-icon.svg" class="wl-widget-suggested-images-drag-icon">
      <h2 class="wl-widget-suggested-images-drag">
        drag &#38; drop
      </h2>

      <!-- SUGGESTED IMAGES BOTTOM SECTION -->
      <div class="wl-widget-suggested-images-bottom">

        <!-- SUGGESTED IMAGES GRID WRAP -->
        <div class="wl-widget-suggested-images-grid-wrap">

          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-1.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-2.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-3.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-4.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-5.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-6.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-7.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-8.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-9.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-7.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-8.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">
          <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-9.png" class="wl-widget-suggested-images wl-widget-suggested-images-carousel-open">

          <!-- SUGGESTED IMAGES FOCUS CAROUSEL -->
          <div class="wl-widget-suggested-images-carousel">

            <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-arrow-icon.svg" class="wl-widget-suggested-images-arrow-left">

            <div class="wl-widget-suggested-images-big-img">
              <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-big.png">
            </div>

            <img src="/wp-demo/wordpress/wp-content/plugins/src/images/svg/wl-arrow-icon.svg" class="wl-widget-suggested-images-arrow-right">

          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- <h3 class="wl-widget-headline"><span>Suggested images</span></h3> -->
<!-- <div wl-carousel>
  <div ng-repeat="(image, label) in images" class="wl-card" wl-carousel-pane>
    <div class="wl-card-image">
      <img ng-src="{{image}}" wl-fallback="{{configuration.defaultThumbnailPath}}" />
    </div>
  </div>
</div> -->

<!-- RELATED POSTS -->

<div class="wl-tab-lead">
  <div class="wl-tab-lead-wrap">
    <h1 class="wl-tab-lead-text">
      Related posts
		</h1>
    <div class="wl-tab-lead-text wl-tab-lead-btn">
      <!-- display a triangle -->
    </div>
  </div>
</div>

<div class="wl-widget-posts">
  <div class="wl-widget-post-wrap">
    <div class="wl-widget-post-img">
      <img src="/wp-demo/wordpress/wp-content/plugins/src/images/prev-1.png">
      <button class="wl-widget-post-link">
        COPY LINK
      </button>
    </div>
    <div class="wl-widget-post-details">
      <h3 class="wl-widget-post-author">Pinco Pallino</h3>
      <h1 class="wl-widget-post-title">La tempesta delle marianne nere</h1>
      <p class="wl-widget-post-prev">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
    </div>
  </div>
</div>

<!-- <h3 class="wl-widget-headline"><span>Related posts</span></h3> -->
<div wl-carousel>
  <div ng-repeat="post in relatedPosts" class="wl-card" wl-carousel-pane>
    <div class="wl-card-image">
      <img ng-src="{{post.thumbnail}}" wl-fallback="{{configuration.defaultThumbnailPath}}" />
    </div>
    <div class="wl-card-title">
      <a ng-href="{{post.link}}">{{post.post_title}}</a>
    </div>
  </div>
</div>

<div class="wl-entity-input-boxes">
  <wl-entity-input-box entity="entity" ng-repeat="entity in analysis.entities | isEntitySelected"></wl-entity-input-box>
  <wl-entity-input-box entity="topic" ng-if="topic"></wl-entity-input-box>
  <wl-entity-input-box entity="publishedPlace" ng-if="publishedPlace"></wl-entity-input-box>
  <div ng-repeat="(box, entities) in selectedEntities">
    <input type='text' name='wl_boxes[{{box}}][]' value='{{id}}' ng-repeat="(id, entity) in entities">
  </div>
  <input type='text' name='wl_metadata[wl_topic]' value='{{topic.id}}' ng-if="topic">
  <input type='text' name='wl_metadata[wl_location_created]' value='{{publishedPlace.id}}' ng-if="publishedPlace">
</div>
