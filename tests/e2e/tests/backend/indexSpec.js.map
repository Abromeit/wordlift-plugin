{"version":3,"file":"backend/indexSpec.js","sources":["webpack:///webpack/bootstrap 8096bb6b6e9280931477","webpack:///tests/e2e/scripts/backend/LoginToWordPress.js","webpack:///tests/e2e/scripts/backend/PostEditPage.js","webpack:///tests/e2e/scripts/backend/SettingsPage.js","webpack:///tests/e2e/scripts/backend/SetupPage.js","webpack:///tests/e2e/scripts/backend/index.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8096bb6b6e9280931477","/**\n * Tests: Login to WordPress.\n *\n * Provides a function to login to WordPress.\n *\n * @since 3.11.0\n */\n\n/**\n * Define the `LoginToWordPress` function.\n *\n * @since 3.11.0\n * @constructor\n */\nconst LoginToWordPress = () => {\n\t// Open the login page.\n\tbrowser.url( '/wp-login.php' );\n\tbrowser.pause( 5000 );\n\n\t// Wait for the login button.\n\tbrowser.waitForExist( '#wp-submit' );\n\n\t// Type username and password, then submit.\n\tbrowser.setValue( '#user_login', 'admin' );\n\tbrowser.setValue( '#user_pass', 'admin' );\n\tbrowser.click( '#wp-submit' );\n\n\t// Wait for the admin screen to load.\n\tbrowser.pause( 5000 );\n};\n\n// Finally export the `LoginToWordPress` function.\nexport default LoginToWordPress;\n\n\n\n// WEBPACK FOOTER //\n// tests/e2e/scripts/backend/LoginToWordPress.js","/**\n * Tests: Post Edit Page.\n *\n * Test the analysis.\n *\n * @since 3.11.0\n */\n\n/**\n * Define the `PostEditPage` test.\n *\n * @since 3.11.0\n * @constructor\n */\nconst PostEditPage = function() {\n\tit( 'opens a post edit page and waits for the analysis results', () => {\n\t\t// @todo: enable creating a post when Safari and FF will support it.\n\t\t//\tbrowser.waitForExist( '#menu-posts > a[href=\"edit.php\"]' );\n\t\t//\n\t\t//\tbrowser.click( '#menu-posts > a[href=\"edit.php\"]' );\n\t\t//\n\t\t//\tbrowser.waitForExist( 'a.page-title-action' );\n\t\t//\n\t\t//\tbrowser.click( 'a.page-title-action' );\n\t\t//\n\t\t//\tbrowser.waitForExist( '#content_ifr' );\n\t\t//\n\t\t//\tbrowser.pause(5000);\n\t\t//\n\t\t//\tbrowser.frame( browser.element( '#content_ifr' ).value );\n\t\t//\n\t\t//\tbrowser.waitForExist( '#tinymce' );\n\t\t//\n\t\t//\tbrowser.click( '#tinymce' );\n\t\t//\n\t\t//\tbrowser.keys( 'WordLift brings the power of Artificial\n\t\t// Intelligence to help you produce richer content and organize it\n\t\t// around your audience.' );  // Set the company name. //\n\t\t// browser.setValue( '#tinymce p', 'WordLift brings the power of //\n\t\t// Artificial Intelligence to help you produce richer content and //\n\t\t// organize it around your audience.' ); browser.frameParent();\n\t\t// browser.element( '#publish' ).scroll(); browser.click( '#publish' );\n\n\t\t// Open a post page.\n\t\tbrowser.url( '/wp-admin/post.php?post=3&action=edit' );\n\t\tbrowser.pause( 2500 );\n\n\t\t// Wait for the analysis results to load.\n\t\tbrowser.waitForExist( '#wl-entity-list ul li' );\n\n\t\t// Click on the first analysis result.\n\t\tbrowser.click( '#wl-entity-list ul li:nth-child(1) > div:nth-child(1)' );\n\t\tbrowser.pause( 1000 );\n\n\t\t// Open the drawer.\n\t\tbrowser.click( '#wl-entity-list ul li:nth-child(1) > div:nth-child(3)' );\n\t\tbrowser.pause( 1000 );\n\n\t\t// Disable link.\n\t\tbrowser.click( '#wl-entity-list ul li:nth-child(1) > div:nth-child(2) > div:nth-child(1)' );\n\t\tbrowser.pause( 1000 );\n\n\t\t// Re-enable link.\n\t\tbrowser.click( '#wl-entity-list ul li:nth-child(1) > div:nth-child(2) > div:nth-child(1)' );\n\t\tbrowser.pause( 1000 );\n\n\t\t// Click on the second analysis result.\n\t\tbrowser.click( '#wl-entity-list ul li:nth-child(2) > div:nth-child(1)' );\n\t\tbrowser.pause( 1000 );\n\n\t\t// @todo: Safari doesn't correctly handle the click / focus event.\n\t\t// Expect the drawer of the 1st tile to be invisible.\n\t\t//\t\texpect( browser.isVisible( '#wl-entity-list ul\n\t\t// li:nth-child(1)' + '> div:nth-child(2)' ) ) .toBe( false );\n\n\t\t// Expect the drawer of the 2nd tile to be visible.\n\t\texpect( browser.isVisible( '#wl-entity-list ul li:nth-child(2) > div:nth-child(2)' ) )\n\t\t\t.toBe( false );\n\t} );\n};\n\n// Finally export the `PostEditPage`.\nexport default PostEditPage;\n\n\n\n// WEBPACK FOOTER //\n// tests/e2e/scripts/backend/PostEditPage.js","/**\n * Tests: WordLift Settings Page.\n *\n * @since 3.11.0\n */\n\n/**\n * Define the `SettingsPage` tests.\n *\n * @since 3.11.0\n */\nconst SettingsPage = function() {\n\t// Opens the settings page and check for the initial settings.\n\tit( 'opens the settings page', () => {\n\t\t// The link to the settings page.\n\t\tconst settingsPageLink = '[href=\"admin.php?page=wl_configuration_admin_menu\"]';\n\n\t\t// Wait for the link to exists, then click.\n\t\tbrowser.waitForExist( settingsPageLink );\n\t\tbrowser.click( settingsPageLink );\n\n\t\t// Wait for the `wl-key` element to exist and to have a `valid` css\n\t\t// class indicating that the key is valid.\n\t\tbrowser.waitForExist( '#wl-key.valid' );\n\n\t\t// Expect the entity base path with `vocabulary` as path and to be\n\t\t// readonly.\n\t\texpect( browser.getValue( '#wl-entity-base-path' ) ).toBe( 'vocabulary' );\n\t\texpect( browser.getAttribute( '#wl-entity-base-path', 'readonly' ) ).toBe( 'true' );\n\n\t\t// Expect English to be selected as language.\n\t\texpect( browser.getValue( '#wl-site-language option[selected=\"selected\"]' ) ).toBe( 'en' );\n\n\t\t// Check that a publisher is set.\n\t\texpect( browser.getValue( '#wl-publisher-id' ) ).not.toBe( '' );\n\t} );\n\n\t// Try changing the license key and see how the input reacts.\n\tit( 'change the license key', () => {\n\t\t// Get the existing license key.\n\t\tconst licenseKey = browser.getValue( '#wl-key' );\n\n\t\t// Set an invalid key.\n\t\tbrowser.setValue( '#wl-key', 'xyz' );\n\n\t\t// Wait for the `wl-key` to turn invalid.\n\t\tbrowser.waitForExist( '#wl-key.invalid' );\n\n\t\t// Set the valid key again.\n\t\tbrowser.setValue( '#wl-key', licenseKey );\n\n\t\t// Wait for the `wl-key` to turn valid.\n\t\tbrowser.waitForExist( '#wl-key.valid' );\n\n\t\t// @todo: replace with sendKeys when FF will support it.\n\t\t//\t\t// Set an empty key.\n\t\t//\t\tbrowser.setValue( '#wl-key', '' );\n\t\t//\n\t\t//\t\t// Wait for the `wl-key` to turn invalid.\n\t\t//\t\tbrowser.waitForExist( '#wl-key.invalid' );\n\t\t//\t\t// Set the valid key again.\n\t\t//\t\tbrowser.setValue( '#wl-key', licenseKey );\n\t\t//\n\t\t//\t\t// Wait for the `wl-key` to turn valid.\n\t\t//\t\tbrowser.waitForExist( '#wl-key.valid' );\n\t} );\n\n\t// Test changing the settings and create a publisher.\n\tit( 'change the settings', () => {\n\t\t// Click on the 'Create a New Publisher' tab.\n\t\tbrowser.click( '[href=\"#tabs-2\"]' );\n\n\t\t// Wait for the `wp_publisher[name]` field to be visible.\n\t\tbrowser.waitForVisible( '[name=\"wl_publisher\\[name\\]\"]' );\n\n\t\t// Click on the `Add Logo` button.\n\t\tbrowser.click( '#wl-publisher-media-uploader' );\n\n\t\t// Check that the `.media-modal` is visible.\n\t\tbrowser.waitForVisible( '.media-modal' );\n\n\t\t// @todo: add image upload and selection.\n\n\t\t// Then close it.\n\t\tbrowser.click( '.media-modal-close' );\n\n\t\t// Set the name.\n\t\tbrowser.setValue( '[name=\"wl_publisher\\[name\\]\"]', 'John Smith' );\n\n\t\t// Submit the form.\n\t\tbrowser.scroll( '#submit' );\n\t\tbrowser.click( '#submit' );\n\t\tbrowser.pause( 5000 );\n\n\t\t// Wait for the `wl-key` element to exist and to have a `valid` css\n\t\t// class indicating that the key is valid.\n\t\tbrowser.waitForExist( '#wl-key.valid' );\n\n\t\t// Check that the publisher is set.\n\t\t// @todo: FF has issues in getting the value for the selected option.\n\t\texpect( browser.getAttribute( '#select2-wl-publisher-id-container', 'title' ) )\n\t\t\t.toBe( 'John Smith' );\n\n\t\t// @todo: also test changing the language.\n\t} );\n};\n\n// Finally export the `SettingsPage`.\nexport default SettingsPage;\n\n\n\n// WEBPACK FOOTER //\n// tests/e2e/scripts/backend/SettingsPage.js","/**\n * Tests: Setup Page.\n *\n * @since 3.11.0\n */\n\n/**\n * Define the `SetupPage` test.\n *\n * @since 3.11.0\n * @constructor\n */\nconst SetupPage = function() {\n\t// `paneX` represents the expected horizontal offset of the current\n\t// pane. It is set the first time, when the _wl-setup_ page is opened.\n\tlet paneX;\n\n\t/**\n\t * Click on the next button in the pane at `index` (1-based).\n\t *\n\t * @since 3.9.0\n\t *\n\t * @param {Number} index The pane index (1-based).\n\t */\n\tconst clickNextAndWaitForPane = function( index ) {\n\t\t// Click on the next button.\n\t\tbrowser.click( '.viewport > ul > li:nth-child(' + index + ') [data-wl-next]' );\n\n\t\t// Wait until the next pane is visible.\n\t\tbrowser.waitUntil( function() {\n\t\t\t// console.log(browser.getLocation('.viewport > ul >\n\t\t\t// li:nth-child()', 'x'));\n\t\t\treturn paneX === browser.getLocation( '.viewport > ul > li:nth-child(' + (\n\t\t\t\t\t\t\t\t\t\t\t\t  index + 1\n\t\t\t\t\t\t\t\t\t\t\t\t  ) + ')', 'x' );\n\t\t}, 750, 'expected pane to be visible within 750ms' );\n\t};\n\n\tit( 'opens the plugins page and activates WordLift', function() {\n\t\t// Navigate to the plugins page.\n\t\tbrowser.url( '/wp-admin/plugins.php' );\n\n\t\t// Check the URL.\n\t\t// expect(browser.getUrl()).toMatch(/\\/wp-admin\\/plugins\\.php$/);\n\n\t\t// Get WordLift's row in the plugins' list.\n\t\tbrowser.waitForExist( '[data-slug=\"wordlift\"]' );\n\n\t\t// Activate WordLift.\n\t\tbrowser.click( '[data-slug=\"wordlift\"] .activate a' );\n\t\tbrowser.pause( 2500 );\n\n\t\t// We got redirected to the `wl-setup` page.\n\t\t// expect(browser.getUrl()).toMatch(/\\/wp-admin\\/index\\.php\\?page=wl-setup$/);\n\n\t\t// Wait until the element becomes invalid.\n\t\tbrowser.waitForExist( '.viewport > ul > li:first-child' );\n\n\t\t// Set the x offset for the current visible pane.\n\t\tpaneX = browser.getLocation( '.viewport > ul > li:first-child', 'x' );\n\t} );\n\n\tit( 'continues to License Key', function() {\n\t\t// Click next and wait for the 2nd pane.\n\t\tclickNextAndWaitForPane( 1 );\n\n\t\t// Set an invalid key.\n\t\tbrowser.setValue( '#key', 'an-invalid-key' );\n\n\t\t// Wait until the element becomes invalid.\n\t\tbrowser.waitForExist( '#key.invalid' );\n\n\t\t// Set a valid key.\n\t\tbrowser.setValue( '#key', process.env.WORDLIFT_KEY );\n\n\t\t// Wait until the element becomes valid.\n\t\tbrowser.waitForExist( '#key.valid' );\n\t} );\n\n\tit( 'continues to Vocabulary', function() {\n\t\t// Click next and wait for the 3rd pane.\n\t\tclickNextAndWaitForPane( 2 );\n\n\t\t// browser.click('input#vocabulary');\n\t\t//\n\t\t// // Set an invalid vocabulary path.\n\t\t// browser.keys(['Backspace', '_']);\n\t\t//\n\t\t// browser.saveScreenshot();\n\t\t//\n\t\t// // Wait until the element becomes invalid.\n\t\t// browser.waitForExist('input#vocabulary.invalid');\n\t\t//\n\t\t// // Set a valid vocabulary.\n\t\t// browser.keys('Backspace');\n\n\t\t// Wait until the element becomes valid.\n\t\tbrowser.waitForExist( 'input#vocabulary.valid' );\n\t} );\n\n\tit( 'continues to Language', function() {\n\t\t// Click next and wait for the 4th pane.\n\t\tclickNextAndWaitForPane( 3 );\n\t} );\n\n\tit( 'continues to Publisher', function() {\n\t\t// Click next and wait for the 5th pane.\n\t\tclickNextAndWaitForPane( 4 );\n\n\t\tbrowser.waitForExist( 'input#name' );\n\n\t\t// Set the company name.\n\t\tbrowser.setValue( 'input#name', 'Acme Inc.' );\n\t\tbrowser.pause( 2500 );\n\n\t\t// Click on finish.\n\t\tbrowser.waitForExist( '#btn-finish' );\n\t\tbrowser.click( '#btn-finish' );\n\t\tbrowser.pause( 5000 );\n\n\t\t// Check that we got back to the admin area.\n\t\tbrowser.waitForExist( '.wp-admin' );\n\t} );\n};\n\n// Finally export the `SetupPage`.\nexport default SetupPage;\n\n\n\n// WEBPACK FOOTER //\n// tests/e2e/scripts/backend/SetupPage.js","/**\n * Internal dependencies\n */\nimport LoginToWordPress from './LoginToWordPress';\nimport SetupPage from './SetupPage';\nimport SettingsPage from './SettingsPage';\nimport PostEditPage from './PostEditPage';\n\n// Define the overall tests.\ndescribe( 'test WordLift', function() {\n\t// Test logging into WordPress.\n\tit( 'log into WordPress backend', LoginToWordPress );\n\n\t// Test the Set-up Page. A clean WordPress install is required for this test\n\t// to work. After the set-up, the Settings Page and the Post Edit Page will\n\t// be tested.\n\tdescribe( 'test the Setup Page', SetupPage );\n\n\t// Test the WordLift Settings Page.\n\tdescribe( 'test the Settings Page', SettingsPage );\n\n\t// Test the Post Edit Page.\n\tdescribe( 'test the Post Edit Page', PostEditPage );\n} );\n\n\n\n// WEBPACK FOOTER //\n// tests/e2e/scripts/backend/index.js"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;;;AChEA;;;;;;;;AAQA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChCA;;;;;;;;AAQA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;AClFA;;;;;;AAMA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC5GA;;;;;;AAMA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC9HA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A","sourceRoot":""}